## 路由器共享有线网

### 1. 故事的起源—极路由3

怎么获取到可以共享校园网这条信息，却是三年前的事情了，确实记不得了，只记得当时在咸鱼几十块钱购入了 **极路由3** 然后插件市场内附带的有锐捷认证，当时甚至都不知道它用的其实也是 mentohust 这个项目。

当自己成功共享的那一刻，快乐？开心？等等心情，难以表达，总之是感觉很酷的一件事情。后来也是通过这个信息差帮助别人搞了一下，当然，我也不知道自己图什么，**分逼没赚！**

至于配置界面，好像什么都不用改，就填一下自己的校园网账号密码就行了，当然对于移动有线网用户，可能会提示用户 MAC 地址绑定错误的认证失败消息，这是因为移动的认证是绑定 MAC地址的（所以借别人账号用时也会出现这个报错），MAC 地址是与网卡绑定的，所以路由器的 MAC 地址与你的电脑 MAC 地址不一致，就会出现这个报错了，解决方式也很简单，复制一下 MAC 地址就行了，管理界面都有的。

或者可以通过校园网内网环境访问：[http://rj.csuft.edu.cn:8080/selfservice/](http://rj.csuft.edu.cn:8080/selfservice/)，账号密码就是校园网账号密码，登陆上去之后解绑 MAC 即可（七天一次，否则就要到电子楼一楼去改了）

### 2. 发现新大陆—Breed

后来的我不满足于现状，也是因为当时电信有线网被信息中心强制接入学校管理，之前的电信有线网虽然网速不快，但是延迟是真的低，也不掉包，因为用的光纤，直接从校外拉进来的，假如和装光纤的师傅关系好甚至可以让他给你改成 200M 甚至更高（当然也要给钱）。

当时的我配合有线网接入测试，发现中间有个缓冲期（一个学期），采用 Web 认证的方式（即无线网的那个网页认证）来认证有线网，Web 认证简直简单到离谱，CURL POST 一个包就算认证成功了（当然账号密码少不了），然后定时 POST 一下就能实现不断网了（Android 不知道，IPHONE 似乎有个快捷指令可以这么做，设置好之后就可以连接无线网的时候不用自己去网页输入了）。提到定时任务，极路由3官方系统就满足不了我了。

于是在我的一番搜索下，了解到了 Padavan 以及 Openwrt 系统，谈到这两个系统就不得不谈到本篇最重要的一个工具：Breed，中文名不死鸟，故名思意可以保护我们的路由器不死，不会变成砖头，它提供了一个 Web UI 可以简单，方便的进行系统刷入。

当然，在刷入 Breed 的过程中，是不会保证路由器不死的，它的不死保证的是刷入之后的，所以，我的极路由3，光荣牺牲了，成为了一块砖头（因为我眼瞎选错了版本:cry:），至今还躺在我的保险柜当中。

总之，在我的一番折腾下，成功刷入了 Padavan，俗称 “老毛子” 系统，并且设置了定时任务，愉快的使用了一个学期的 80M 的有线网（此时只是配合接入，实际上走的还是电信光纤，网速还快了很多，美滴很）。

当然，敲重点，我的极路由3已经光荣了，所以我已经更换了下篇要将的 K2 路由器。

### 3. 信息差赚钱—K2

在上篇发现可行之后，我便购入了一批 K2 路由器，然后配合着校园网+光猫+路由器一起售卖，主打的就是一个一条龙服务，刷入的路由器系统还是以 Padavan 为主，因为当时在给电信运营商打工（卖卡，卖校园网），所以主要还是帮忙推电信为主。

老毛子用来跑定时任务还是很方便的，也是被迫学习了一下 Shell 脚本（我才不会说我大二就开始没好好听课，Linux 课完全水过去的），它的格式还让我难受了好久，多个空格（变量赋值时等号两边不能加！！！）让我找了好久的 Bug（只能说自己半吊子，活该），sh 脚本至今应该还有备份，后续应该会上传至 back 文件夹下。

提到了空格，我又想到了写 bat 脚本的时候（Windows 下的批处理文件）也是因为 if 后面多了个空格，导致一直跑不出我想要的结果，找了半夜的 Bug（哭死了我 :sob:）

总之这算是我大学赚到的一桶金（不是第一桶金哦）？还不错欸，我不认为我拿这些开源的东西赚钱有什么的（有意见我也不听:hear_no_evil::hear_no_evil::hear_no_evil:），我赚的是信息差。

### 4. 不安现状—K2P

一学期后，电信如约换成了锐捷认证，IP 也变成移动的 IP 地址了，至今为止（2023.2）一直是，说是如约，鬼知道开学那几天我天天睡三个小时帮忙处理认证报错有多苦逼，这钱:moneybag:是真难赚！

**人嘛，总是会安于现状，却又不满足于现状。** 于是就想是否可以带宽叠加，又是一番搜索下，我了解到了 Openwrt 系统可以做到，通过虚拟网卡，负载均衡来实现。

但是由于 K2 系统的 Wan 口是百兆的，即撑死就跑 100M，当时用两个账号能够稳定跑到 80M 左右，再叠加更多账号也不行了。一番研究下发现了以下几个要点：

1. 网线得是超5类或者6类网线，首先网线得支持千兆
2. 路由器 Wan 口得是千兆的，K2 是百兆路由，所以引入本片关键 ==》`K2P`
3. 宿舍墙上的有线网接口得是千兆的，笔者宿舍一个千兆一个百兆，当时也是没有发现这一点，满足了前两点还是一直拨号拨不上去

于是在我后来的努力下，成功使用五个账号拨号到了 200M，当然这时的我只是为了研究了，宿舍用这玩意儿多少有点奢侈了：`38 * 5 = 190` 一个月，还不算上路由器的费用，之所以是 38 一个月是因为电信中间有个学期推出过只带有有线网的校园网套餐，个人认为性价比很高，至今还在使用。